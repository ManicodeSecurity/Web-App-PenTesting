# Request Replay    
Often times, using a browser to manually enter attack payloads becomes cumbersome and ineffective. We can use the built in Burp Suite tool called `Repeater` and `Intruder` to do the heavy lifting for us.

### Repeat a Request
1. Open up Burp Suite in your Kali Linux VM and go to the `Proxy -> HTTP history` tab. Look for the HTTP POST request that was sent to the `/shepherd/login` URL. We will be sending this to the `Repeater` tool to modify our HTTP POST requests.

2. Right click on the POST request and click `Send to Repeater` as follows:

![Burp Send to Repeater](../images/burp_send_to_repeater.png?raw=true "Burp Send to Repeater")

This will open up the HTTP POST request in the `Repeater` tab and allow us to replay the request with modified parameters. 

3. Modify the request and examine the responses. Use the `Go` button after your parameters have been modified to send the request to the server.

### Send Attack Payloads
Repeater is great for nuanced testing when you have an idea of what you are looking for. When we are in discovery mode, we want to use a more "intrusive" testing methodology. This is where the `Intruder` tool comes into the picture. 

1. Open up Burp Suite in your Kali Linux VM and go to the `Proxy -> HTTP history` tab. Look for the HTTP POST request that was sent to the `/shepherd/login` URL. We will be sending this to the `Intruder` tool to do a mock brute-force attack.

![Burp Send to Intruder](../images/burp_send_to_intruder.png?raw=true "Burp Send to Intruder")

2. In the `Intruder` tab, click the `Positions` sub-tab. This is where we are going to pick a place to start fuzzing the POST request.

3. Click `Clear` on the right-hand side.

4. For this simple test, we want to attempt to brute-force the password of the user `admin-manicode`. Remember, usernames are typically easy to discover as they are often an email address or simple first name / last name combination.

5. Change the `login` parameter to `admin-manicode` and highlight the value of the `pwd` parameter. Once highlighted, click `Add` on the right. This tells Intruder that we want to fuzz the `pwd` parameter. Keep attack type as "Sniper". You can learn more about Burp Intruder attack types [here](https://portswigger.net/burp/documentation/desktop/tools/intruder/positions).

![Burp Intruder Payload](../images/burp_payload.png?raw=true "Burp Intruder Payload")

6. Now click on the `Payloads` tab. This is where we tell Burp what we want to send in the `pwd` parameter as part of the attack. 

The following passwords are a small sample from known breached (and bad) passwords. Copy these passwords to your clipboard:
```
123456
password
12345678
qwerty
123456789
12345
1234
111111
1234567
dragon
123123
baseball
abc123
football
monkey
letmein
696969
shadow
master
666666
qwertyuiop
123321
mustang
1234567890
michael
654321
superman
1qaz2wsx
7777777
121212
000000
qazwsx
123qwe
killer
trustno1
```
7. Click the `Paste` button in the `Payload Options` area of the `Payloads` tab.

![Burp Paste Payload](../images/burp_paste_payloads.png?raw=true "Burp Paste Payload")

8. Click `Start attack` in the upper-right hand corner of the screen.

Note: When using Burp Suite Professional ($$$) attacks are not throttled like they are in the free community edition.

The attack will go through each of the payloads you pasted. Analyze the output, did you successfully find the password?

### Bonus
Use a project called SecLists or any other breached password list to run a custom brute-force attack against the login page. What did you come up with? Can you run `Intruder` against other pages in the Security Shepherd platform?

